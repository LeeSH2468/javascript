<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>바닐라JS - 노마드</title>
  <style>
    h1{text-align: center;}
    .box{max-width:850px; margin:auto; border:1px solid #777; padding:10px 20px; border-radius: 5px; margin-bottom:30px;}
    .box h2{font-size:1.8rem; margin:10px 0;}
    .box span,.box li{font-size:0.9rem; margin:5px;}
    .box p.note{font-weight:bold;font-size:1.2rem; margin:10px 0 0;}
    .hideSlide{height:auto; transition:all .5s ease;}
    .hideSlide.hide{height:0; overflow: hidden;}
    .hideSlide pre{padding:20px; background-color:#eee; border-radius: 20px; overflow-x: scroll;}
    .btn{display:inline-block; padding:5px 10px;font-weight:bold; color:#fff; cursor:pointer; border-radius: 10px; background-color:#ddd; transition: all .5s ease;}
    .clickadd{background-color:#f76;}
    .hiding,.form,.greetings{display:none;}
    .showing{display:block;}    
  </style>
</head>
<body>
<h1>바닐라JS</h1>
<div class="box">
  <h2>1. 버튼</h2>
  <input type="button" id="target" value="button" />
  <p class="note">클릭 함수 실행</p>
  <span>버튼 클릭하면 글자 색 변하기</span>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
const t = document.getElementById('target');
  function clickbtn(){
    t.style.color = "#add";
  }
t.addEventListener('click', clickbtn);</pre>
  </div>
</div>
<div class="box">
  <h2>2. 계산기</h2>

  <p id="codecalc">test</p>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
//계산기 함수
const calculator = {
    plus : function(a, b){
        return (`${a}+${b}= ${a+b}`);
    },
    minis : function(a, b){
        return (`${a}-${b}= ${a-b}`);
    },
    multiple : function(a, b){
        return (`${a}*${b}= ${a*b}`);
    },
    divide : function(a, b){
        return (`${a}/${b}= ${a/b}`);
    },
    remainder : function(a, b){
        return (`${a}%${b}= ${a%b}`);
    },
    power : function(a, b){
        return (`${a}**${b}= ${a**b}`);
    }
}
const answer =[
  calculator.plus(5,5),
  calculator.minis(1,87),
  calculator.multiple(5,6),
  calculator.divide(68,5),
  calculator.remainder(234,5),
  calculator.power(3,2)
]

document.getElementById('codecalc').innerHTML = answer;</pre>
  </div>
</div>
<div class="box">
  <h2>3. 클릭시 변경</h2>
  <span id="changeColor" class="btn">Click</span>
  <p class="note">if문 / if-else</p>
  <ol>
    <li>글자 클릭하면 원래 색상값 받아오기</li>
    <li>글자 색이 처음 지정 색과 같으면, 변경</li>
    <li>글자 색이 처음 지정 색과 다르면, 원래 값으로 변경</li>
  </ol>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
const changeColor = document.getElementById("changeColor");
const Basic_color = "rgb(255, 170, 255)";
const Othder_color = "rgb(170, 221, 170)";
function handler(){
  const nowColor = changeColor.style.color;
    if(nowColor === Basic_color){
      changeColor.style.color = Othder_color;
    }else{
      changeColor.style.color = Basic_color;
    }
  }
  
changeColor.addEventListener('click',handler);</pre>
  </div>
</div>
<div class="box">
  <h2>4. class추가, 제거</h2>
  <span id="changeToggle" class="btn">Click</span>
  <p class="note">if문 / if-else 2 </p>
  <ol>
    <li>글자 클릭하면 원래 색상값 받아오기</li>
  </ol>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
const changeToggle = document.querySelector("#changeToggle");
const clickClass = "clickadd";

function handlerClick(){
  const btnClass = changeToggle.className;
  // const hasClass = changeToggle.classList.contains(clickClass);
  // console.log(hasClass)
  // if(!hasClass){
  //   changeToggle.classList.add(clickClass);
  // }else{
  //   changeToggle.classList.remove(clickClass);
  // }

  changeToggle.classList.toggle(clickClass) //같은 기능

}

function init(){
  changeToggle.addEventListener('click',handlerClick);
}

init();</pre>
  </div>
</div>
<div class="box js-clock">
  <h2>5. 자동 반복 setInterval</h2>
  <span class="js-clock">00:00</span>
  <p class="note">setInterval </p>
  <ol>
    <li>일정 시간마다 반복</li>
    <li>setInterval(함수,실행시간 간격)</li>
    <li>삼항연산자</li>
  </ol>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
const clockContainer = document.querySelector('.js-clock');
      clockTitle = clockContainer.querySelector("span");

//현재 시간 얻기
function getTime(){
  const date = new Date();
        minutes = date.getMinutes();
        hours = date.getHours();
        seconds = date.getSeconds();
        clockTitle.innerText = `${
          hours < 10 ? `0${hours}` : hours
        }:${
          minutes < 10 ? `0${minutes}` : minutes
        }:${
          seconds < 10 ? `0${seconds}` : seconds
        }`;
}

function init2(){
  setInterval(getTime,1000);
}

init2();

</pre>
  </div>
</div>
<div class="box">
  <h2>6. 사용자 정보 기억(로컬 스토리지)</h2>
    <form class="js-form form">
      <input type="text" placeholder="What is your name?">
    </form>
    <h4 class="js-greetings greetings"></h4>
  <ol>
    <li>로컬 스토리지 정보 : 관리자도구 > Application > Local Storage</li>
    <li>키값명 변수로 지정</li>
    <li>display : block/none 클래스 명 변수로 지정</li>
    <li>loadName()
      <p>저장된 값(이름)의 존재 여부를 판단해 각각의 경우에 따라 실행되는 함수</p>
      <ul style="border:1px solid #aaa; border-radius: 20px;">
        <li>localStorage.getItem() : 로컬 스토리지에 저장된USER_LS이름 얻기</li>
        <li>const currentUser = localStorage.getItem(USER_LS); - 이름값 얻기를 변수로 지정</li>
        <li>if문 설정 - 값이 있을 때 / 없을 때</li>
        <li>값이 있을 때 = askForName() -값을 묻는 객체 보이게하기 + submit(엔터)시 handleSubmit함수 실행</li>
        <li>값이 없을 때 = paintGreeting(값) - 이름 변경, 색변경 </li>
      </ul>
    </li>
    <li> paintGreeting(text)
      <p>저장된 값이 있을 때 실행되는 함수</p>
      <ul style="border:1px solid #aaa; border-radius: 20px;">
        <li>제출 후, form(입력창)-hide</li>
        <li>greeting(결과 문구창)-show</li>
        <li>greeting.innerText = `${text}, Do It!` - 결과 문구창 텍스트 변경</li>
      </ul>
    </li>
    <li>askForName()
      <p>저장된 값이 없을 때 실행되는 함수</p>
      <ul style="border:1px solid #aaa; border-radius: 20px;">
         <li>form(입력창) 보이게하기 -show</li>
         <li>제출시(엔터) handleSubmit함수 실행</li>
       </ul>
    </li>
    <li>handleSubmit(event)
      <p>입력한 값이 로컬 스토리지에 전환될 수 있도록 하는 함수(저장x, 저장될 수 있도록 만들어줌)</p>
      <ul style="border:1px solid #aaa; border-radius: 20px;">
        <li>이벤트 초기화(원래 있던 기능 제거)</li>
        <li>입력한 값을 변수로 지정</li>
        <li>입력한 값에 paintGreeting() 함수 실행</li>
        <li>입력한 값에 saveName() 함수 실행 - 로컬스토리지에 저장</li>
      </ul>
    </li>
    <li>saveName(text)
      <p>입력한 값을 로컬 스토리지에 저장</p>
      <ul style="border:1px solid #aaa; border-radius: 20px;">
        <li>setItem = 저장</li>
        <li>getItem = 불러오기</li>
        <li>localStorage.setItem(USER_LS,text) - 입력한 text를 USER_LS라는 키의 값으로 저장</li>
        <li>키 = 값 </li>
        <li>USER_LS(유저이름) = 입력한 값</li>
      </ul>
    </li>
  </ol>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
const jsform=document.querySelector('.js-form');
      input = jsform.querySelector('input');
      greeting = document.querySelector('.js-greetings');
const USER_LS = "currentUser"; // 키값이름 변수지정
      SHOWING_CN = "showing";//block - 클래스 명 변수지정

function saveName(text){
  localStorage.setItem(USER_LS,text); //로컬 스토리지에 텍스트 명 저장
}

function handleSubmit(event){
  event.preventDefault(); // 이벤트 초기화(엔터 치면 새로고침)
  const cValur = input.value; //입력한 텍스트 변수지정
  paintGreeting(cValur); // 입력한 텍스트 색 변경(paintGreeting함수 실행)
  saveName(cValur)// 입력한 텍스트로 이름 저장 (saveName함수 실행)
}     

function askForName(){
  jsform.classList.add(SHOWING_CN); //block -클래스명 추가(show)
  jsform.addEventListener("submit",handleSubmit); //submit할 때 handleSubmit함수 실행
}
function paintGreeting(text){
  jsform.classList.remove(SHOWING_CN); //block -클래스명 제거(hide)
  greeting.classList.add(SHOWING_CN); //block -클래스명 추가(show)
  greeting.innerText = `${text}, Do It!`//greeting에 텍스트 변경

}
function loadName(){
  const currentUser = localStorage.getItem(USER_LS); //로컬 스토리지에 저장된USER_LS이름 얻기(getItem)를 변수로 지정
  if(currentUser === null){
    // 값이 없을 때
    askForName(); //값을 묻는 객체 보이게하기 + submit(엔터)시 handleSubmit함수 실행
  }else{
    // 값이 있을 때
    paintGreeting(currentUser); //이름 변경, 색변경
  }
}

function init3(){
  loadName(); //함수실행
}
init3(); //함수실행
</pre>
  </div>
</div>

<div class="box">
  <h2>7.TO Do List</h2>
  <form class="todoform">
    <input type="text" placeholder="Write a to do">
  </form>
  <ul class="js-todoList"></ul>
  <p class="note">if문 / if-else</p>
  <ol>
    <li>글자 클릭하면 원래 색상값 받아오기</li>
  </ol>
  <p class="slideToggle">▽ 코드</p>
  <div class="hideSlide">
    <pre>
</pre>
  </div>
</div>

<!-- ====================================================================================  -->
<script>
// 7.to-do list
const tdForm = document.querySelector('.todoform'),
      tdInput = tdForm.querySelector('input'),
      tdList = document.querySelector('.js-todoList');

const TODOS_LS = 'toDos';
let idNum = 1;
let toDos = [];

function deleteToDo(event){
  const btn = event.target; // 선택한 버튼
  const li = btn.parentNode; //삭제될 li(선택한 버튼의 부모)
  tdList.removeChild(li);

  while(tdList.firstChild){
    tdList.removeChild(tdList.firstChild);
  }  
  idNum = 1;
  const cleanToDos = toDos.filter(function(toDo){
    toDo.id = idNum;
    paintToDo(toDo.text);
    return toDo.id !== parseInt(li.id); 
  });
  toDos = cleanToDos;
  saveTodos();


}

function saveTodos(){
  localStorage.setItem(TODOS_LS,JSON.stringify(toDos));
}

function paintToDo(text){
  const li = document.createElement('li');
  const delbtn = document.createElement('button');
  const span = document.createElement('span');
  const newId = idNum;
  idNum +=1;
  delbtn.innerText = '❌'
  delbtn.addEventListener('click',deleteToDo);
  span.innerText = text;
  li.appendChild(span);
  li.appendChild(delbtn);
  li.id = newId;
  tdList.appendChild(li);
  const todoObj = {
    text : text,
    id : newId
  };
  toDos.push(todoObj);
  saveTodos();
}

function handleSubmit2(event){
  event.preventDefault();
  const currentValue = tdInput.value;
  paintToDo(currentValue)
  tdInput.value  = ''
}

function loadToDos(){
  const loadedToDos = localStorage.getItem(TODOS_LS);
  if(loadedToDos !== null){
    const parTODOS = JSON.parse(loadedToDos);
    parTODOS.forEach(function(toDo){
      paintToDo(toDo.text);
    })
  }
}

function init4(){
  loadToDos();
  tdForm.addEventListener("submit",handleSubmit2);
}
init4(); 





// 1. 버튼 함수
const t = document.getElementById('target');
  function clickbtn(){
      t.style.color = "#add";
  }
  t.addEventListener('click', clickbtn);

// 2. 계산기 함수
const calculator = {
    plus : function(a, b){
        return (`${a}+${b}= ${a+b}`);
    },
    minis : function(a, b){
        return (`${a}-${b}= ${a-b}`);
    },
    multiple : function(a, b){
        return (`${a}*${b}= ${a*b}`);
    },
    divide : function(a, b){
        return (`${a}/${b}= ${a/b}`);
    },
    remainder : function(a, b){
        return (`${a}%${b}= ${a%b}`);
    },
    power : function(a, b){
        return (`${a}**${b}= ${a**b}`);
    }
}
// const calbtn = document.getElementsByClassName('calbtn')
// const caltext = document.getElementsByClassName('caltext')
//   function calculClick(){
//     console.log('test')
//   }
// calbtn.addEventListener('click',calculClick);
const answer =[
  calculator.plus(5,5),
  calculator.minis(1,87),
  calculator.multiple(5,6),
  calculator.divide(68,5),
  calculator.remainder(234,5),
  calculator.power(3,2)
]
document.getElementById('codecalc').innerHTML = answer;
//prompt 조건문
// const question = prompt("How old are you?");
// if(question > 19){
//   alert("ok");
// }else{
//   alert("no");
// }

// 3. if문 함수
const changeColor = document.getElementById("changeColor");
const Basic_color = "rgb(51, 90, 219)";
const Othder_color = "rgb(255, 152, 0)";
function handler(){
    const nowColor = changeColor.style.backgroundColor;
    if(nowColor === Basic_color){
      changeColor.style.backgroundColor = Othder_color;
    }else{
      changeColor.style.backgroundColor = Basic_color;
    }
  }
changeColor.addEventListener('click',handler);

// 4. 클래스추가
const changeToggle = document.querySelector("#changeToggle");
const clickClass = "clickadd";

function handlerClick(){
  const btnClass = changeToggle.className;
  // const hasClass = changeToggle.classList.contains(clickClass);
  // console.log(hasClass)
  // if(!hasClass){
  //   changeToggle.classList.add(clickClass);
  // }else{
  //   changeToggle.classList.remove(clickClass);
  // }
  changeToggle.classList.toggle(clickClass); //같은 기능
}

function init(){
  changeToggle.addEventListener('click',handlerClick);
}
init();

// 5. 시계
const clockContainer = document.querySelector('.js-clock'),
      clockTitle = clockContainer.querySelector("span");
      //현재 시간 얻기
function getTime(){
  const date = new Date();
        minutes = date.getMinutes();
        hours = date.getHours();
        seconds = date.getSeconds();
        clockTitle.innerText = `${
          hours < 10 ? `0${hours}` : hours
        }:${
          minutes < 10 ? `0${minutes}` : minutes
        }:${
          seconds < 10 ? `0${seconds}` : seconds
        }`;
}      

function init2(){
  setInterval(getTime,1000);
}
init2();

// 6. 사용자 정보 기억
const jsform=document.querySelector('.js-form');
      input = jsform.querySelector('input');
      greeting = document.querySelector('.js-greetings');
const USER_LS = "currentUser"; // 키값이름
      SHOWING_CN = "showing";

function saveName(text){
  localStorage.setItem(USER_LS,text)
}

function handleSubmit(event){
  event.preventDefault();
  const cValur = input.value;
  paintGreeting(cValur);
  saveName(cValur)
}
function askForName(){
  jsform.classList.add(SHOWING_CN);
  jsform.addEventListener("submit",handleSubmit);
}
function paintGreeting(text){
  jsform.classList.remove(SHOWING_CN);
  greeting.classList.add(SHOWING_CN);
  greeting.innerText = `${text}, Do It!`

}
function loadName(){
  const currentUser = localStorage.getItem(USER_LS);
  if(currentUser === null){
    // 값이 없을 때
    askForName();
    console.log('test');
  }else{
    // 값이 있을 때
    paintGreeting(currentUser);
    console.log('2');
  }
}

function init3(){
  loadName()
}
init3();

</script>
</body>
</html>